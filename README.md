Firebird Streaming
==================

Проект Firebird Streaming - это набор библиотек для разбора логов репликации Firebird после обработки их утилитой `fb_repl_print`. На каждое событие в логе можно написать свой обработчик унаследовав интерфейс SegmentProcessEventListener.

Данная библиотека может применяться для оповещения о событиях через систему очередей, или для написания собственного репликатора в другие СУБД.

Альфа релиз можно скачать по ссылке https://github.com/sim1984/fbstreaming/files/7101299/release.zip

Папка `journals/incoming` содержит логи репликации после обработки их утилитой `fb_repl_print`.

Папка `journals/outgoing` некоторые выходные файлы, которые являются результатом работы одного из плагинов.

Файл `/journals/segments.journal` файл в который записываются имена файлов обработанных сегментов. Используется некоторыми плагинами.

JAR файлы содержащие плагины расположены в папке `plugins`.
В примере имеются следующие плагины:
* преобразование сегментов репликации в формат JSON
* отправка связанных данных DML операторов (в формате JSON) в очередь RabbitMQ по событию подтверждения транзакции
* запись DML операторов в SQL файлы. Запись происходит по событию подтверждения транзакции.

Для настройки используется файл `config.properties`.
Свойства в файле конфигурации:
* pluginClassName - полное имя класса плагина
* incomingFolder - папка со входными журналами (сегментами репликации)
* outgoingFolder - папка с результатами работы плагина (используется плагинами JSON и SQL)
* journalFileName - файл с обработанными сегментами репликации (используется плагинами SQL и RabbitMQ)
* segmentFileNameMask - маска для входных файлов (сегментов репликации)
* segmentFileCharset - кодировка сегментов репликации
* includeTables - регулярное выражение для фильтрации таблиц (если не задано обрабатываются все таблицы)
* rabbit.host - хот для плагина RabbitMQ
* rabbit.queueName - имя очереди для плагина RabbitMQ

